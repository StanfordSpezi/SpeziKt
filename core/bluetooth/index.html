<!doctype html>
<html class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>bluetooth</title>
<link href="../../images/logo-icon.svg" rel="icon" type="image/svg">    <script>var pathToRoot = "../../";</script>
    <script>document.documentElement.classList.replace("no-js","js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async></script>
<script type="text/javascript" src="../../scripts/sourceset_dependencies.js" async></script>
<link href="../../styles/style.css" rel="Stylesheet">
<link href="../../styles/main.css" rel="Stylesheet">
<link href="../../styles/prism.css" rel="Stylesheet">
<link href="../../styles/logo-styles.css" rel="Stylesheet">
<link href="../../styles/font-jb-sans-auto.css" rel="Stylesheet">
<script type="text/javascript" src="../../scripts/clipboard.js" async></script>
<script type="text/javascript" src="../../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../../scripts/main.js" defer></script>
<script type="text/javascript" src="../../scripts/prism.js" async></script>
<script type="text/javascript" src="../../scripts/symbol-parameters-wrapper_deferred.js" defer></script></head>
<body>
    <div class="root">
<nav class="navigation" id="navigation-wrapper">
    <div class="navigation--inner">
        <div class="navigation-title">
            <button class="menu-toggle" id="menu-toggle" type="button">toggle menu</button>
            <div class="library-name">
<a class="library-name--link" href="../../index.html">
                            Spezi Documentation
                    </a>            </div>
            <div class="library-version">
            </div>
        </div>
        <div class="filter-section" id="filter-section">
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":core:bluetooth:dokkaHtmlPartial/release">androidJvm</button>
        </div>
    </div>
    <div class="navigation-controls">
        <button class="navigation-controls--btn navigation-controls--theme" id="theme-toggle-button" type="button">switch theme</button>
        <div class="navigation-controls--btn navigation-controls--search" id="searchBar" role="button">search in API</div>
    </div>
</nav>
        <div id="container">
            <div class="sidebar" id="leftColumn">
                <div class="sidebar--inner" id="sideMenu"></div>
            </div>
            <div id="main">
<div class="main-content" id="content" pageids="bluetooth::////PointingToDeclaration//-291835360">
  <div class="breadcrumbs"></div>
  <div class="cover ">
    <h1 class="cover"><span><span>bluetooth</span></span></h1>
    <div class="platform-hinted UnderCoverText" data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":core:bluetooth:dokkaHtmlPartial/release"><h2 class="">Overview</h2><p class="paragraph">The Bluetooth module provides utilities for managing Bluetooth Low Energy (BLE) functionality on Android devices.  It includes components for scanning, connecting to, and interacting with BLE devices.</p><h2 class="">Components</h2><h3 class="">BLEService</h3><p class="paragraph">The <code class="lang-kotlin">BLEService</code> is the main public API encapsulates the capabilities to manage BLE device connections.  It provides methods for starting and stopping the BLE service, as well as flows for monitoring the service state  and receiving events. It makes use of the following internal APIs:</p><ul><li><p class="paragraph"><code class="lang-kotlin">BLEDeviceScanner</code> is responsible for scanning nearby BLE devices. It allows for starting and stopping scanning  operations and emits events for discovered devices or scanning failures.</p></li><li><p class="paragraph"><code class="lang-kotlin">BLEDeviceConnector</code> handles the connection to individual BLE devices. It manages the Bluetooth GATT connection and  emits events for connection state changes and received measurements.</p></li><li><p class="paragraph"><code class="lang-kotlin">MeasurementMapper</code> maps Bluetooth GATT characteristics to specific measurement types, such as blood pressure or weight measurements.</p></li><li><p class="paragraph"><code class="lang-kotlin">PermissionChecker</code> class is responsible for checking Bluetooth-related permissions on the device.</p></li></ul><h3 class="">Dependency</h3><div class="sample-container"><pre><code class="block lang-gradle" theme="idea">dependencies {<br>    implementation(":core:bluetooth")`<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class="">Usage</h3><p class="paragraph">Steps to use the Bluetooth module:</p><ol><li><p class="paragraph">Ensure the module is included as a #dependency.</p></li><li><p class="paragraph">Obtain an instance of the <code class="lang-kotlin">BLEService</code>, e.g. using dependency injection.</p></li><li><p class="paragraph">Start the BLE service using the <code class="lang-kotlin">start()</code> method to initiate scanning for nearby devices.</p></li><li><p class="paragraph">Listen to events emitted by the BLE service to handle device discovery, connection state changes, and received measurements.</p></li><li><p class="paragraph">Stop the BLE service when it is no longer needed using the <code class="lang-kotlin">stop()</code> method.</p></li></ol><p class="paragraph">Example usage in a view model:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">@HiltViewModel<br>class BluetoothViewModel @Inject constructor(<br>    private val bleService: BLEService,<br>) : ViewModel() {<br><br>    private fun start() {<br>        bleService.start()<br>        viewModelScope.launch {<br>            bleService.state.collect { state -&gt;<br>                when (state) {<br>                    BLEServiceState.Idle -&gt; {<br>                        // Handle Idle state<br>                    }<br>                    is BLEServiceState.Scanning -&gt; {<br>                        // Handle Scanning state<br>                    }<br>                }<br>            }<br>        }<br><br>        viewModelScope.launch {<br>            bleService.events.collect { event -&gt;<br>                // Handle BLE service events<br>                when (event) {<br>                    BLEServiceEvent.BluetoothNotEnabled -&gt; {<br>                        // handle BluetoothNotEnabled event<br>                    }<br>                    BLEServiceEvent.ScanningStarted -&gt; {<br>                        // handle ScanningStarted event<br>                    }<br>                    // handle other events<br>                }<br>            }<br>        }<br>    }<br><br>    override fun onCleared() {<br>        bleService.stop()<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div></div>
  </div>
  <h2 class="">Packages</h2>
  <div class="table"><a data-name="1104216433%2FPackages%2F-291835360" anchor-label="edu.stanford.spezi.core.bluetooth.api" id="1104216433%2FPackages%2F-291835360" data-filterable-set=":core:bluetooth:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":core:bluetooth:dokkaHtmlPartial/release" data-filterable-set=":core:bluetooth:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="edu.stanford.spezi.core.bluetooth.api/index.html">edu.stanford.spezi.core.bluetooth.api</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1104216433%2FPackages%2F-291835360"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="-729760782%2FPackages%2F-291835360" anchor-label="edu.stanford.spezi.core.bluetooth.data.model" id="-729760782%2FPackages%2F-291835360" data-filterable-set=":core:bluetooth:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":core:bluetooth:dokkaHtmlPartial/release" data-filterable-set=":core:bluetooth:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="edu.stanford.spezi.core.bluetooth.data.model/index.html">edu.stanford.spezi.core.bluetooth.data.model</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-729760782%2FPackages%2F-291835360"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="-1845367918%2FPackages%2F-291835360" anchor-label="edu.stanford.spezi.core.bluetooth.di" id="-1845367918%2FPackages%2F-291835360" data-filterable-set=":core:bluetooth:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":core:bluetooth:dokkaHtmlPartial/release" data-filterable-set=":core:bluetooth:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="edu.stanford.spezi.core.bluetooth.di/index.html">edu.stanford.spezi.core.bluetooth.di</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1845367918%2FPackages%2F-291835360"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
  </div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>Â© 2025 Copyright</span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
            </div>
        </div>
    </div>
</body>
</html>

